<!doctype html>
<html lang="en">

  <head>
    <meta charset="utf-8">

    <title>Building StencilJS with TypeScript</title>

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

    <link rel="stylesheet" href="css/reveal.css">
    <link rel="stylesheet" href="css/theme/black.css" id="theme">

    <!-- Code syntax highlighting -->
    <link rel="stylesheet" href="lib/css/zenburn.css">
    <script src="./node_modules/github-web-components/dist/github-web-components.js"></script>

    <!-- Printing and PDF exports -->
    <script>
      var link = document.createElement( 'link' );
      link.rel = 'stylesheet';
      link.type = 'text/css';
      link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
      document.getElementsByTagName( 'head' )[0].appendChild( link );

    </script>

    <style>

      :root {
        --stencil-grape: rgb(88, 81, 255);
      }
      .reveal section img.nostyle {
          background: none;
          border: none;
          box-shadow: none;
          margin: 0;
      }
      .example-num {
        position: absolute;
        top: -20px;
        right: -20px;
        font-size: 0.8em;
        color: grey;
      }
      b {
        font-weight: normal;
        color:aqua;
      }
      i {
        font-style: normal;
        color: yellow;
      }
      img.trans {
        background-color: transparent !important;
        border: none !important;
        box-shadow: none !important;
        margin: 0 !important;
      }
    </style>

    <!--[if lt IE 9]>
    <script src="lib/js/html5shiv.js"></script>
    <![endif]-->
  </head>

  <body>

    <div class="reveal">

      <!-- Any section element inside of this container is displayed as a slide -->
      <div class="slides">
        <section>
          <h3>Building StencilJS with TypeScript</h3>
          <p>
            <github-intro userid="jthoms1"></github-intro>
          </p>
        </section>

        <section>
          <h2>About Me</h2>
          <ul>
            <li>Senior Developer at Ionic</li>
            <li>One of the creators of StencilJS</li>
          </ul>
          <img class="fragment" src="images/kids.jpg" />
          <aside class="notes">
            <ul>
            <li>Senior Developer at Ionic
            <li>One of the creators of StencilJS
            <li>Today I will be talking about how we built StencilJS on TypeScript
          </aside>
        </section>

        <section>
          <h2 class="fragment fade-out">I ‚ù§ TypeScript</h2>
          <h2 class="fragment fade-in fade-out">I Ô∏èüíî TypeScript</h2>
          <h2 class="fragment fade-in">I ‚ù§ TypeScript</h2>
          <aside class="notes">
            <li>I joined Ionic 2 years ago.
            <li>I was writing primarily React applications before joining Ionic
            <li>My preferred experience was using Babel for my JSX compilation and esnext features, and eslint to keep some code consistency.
            <li>6 months after started I was tasked with rewriting our CLI. Of course it was going to be written in Typescript.
            <li>It took about 2 weeks of constantly fighting with the compiler before I started to feel comfortable and started embracing it‚Äôs type system. I would still consider myself new to Typescript but I have been writing it solely for the last 1 ¬Ω years.
          </aside>
        </section>

        <section>
          <h2>What is Ionic?</h2>
          <ul>
            <li>Cross platform UI kit</li>
            <li>AngularJS -> Angular -> <span class="fragment">Stencil</span></li>
            <li>TypeScript</li>
          </ul>
          <aside class="notes">
            <li>Framework/Component Library for mobile applications (Vanity metric) and we offer supporting services to these application developers.
            <li>Cross platform UI kit.
            <li>Bootstrap for mobile.
            <li>Software for developers so that they can create amazing web based applications.
            <li>Component library/framework built originally on AngularJS and then Angular /w TypeScript.
            <li>Typescript became the language of Ionic after we adopted it for our v2 release of the framework, untyped JS wasn‚Äôt written anymore at the company. Our front-end libraries, our node code, our websites, our webapps, etc all in TypeScript.
          </aside>
        </section>

        <section>
          <h2>The JS ecosystem is changing</h2>
          <ul>
            <li>'what is best framework?' is now 'which do you prefer?'</li>
            <li>Components that will work with any framework <span class="fragment">or no framework</span></li>
            <li>Write once use everywhere</li>
          </ul>
          <aside class="notes">
            <li>What is the best framework, is no longer important.  The question is which framework do you prefer and we want to provide our components to devs no matter the framework they prefer.
            <li>Enable components to work with any framework (or no framework at all)
            <li>We wanted to have Ionic written in one format and have it work in any website or web application.
          </aside>
        </section>

        <section>
          <h2>StencilJS Born out of Necessity</h2>
          <ul>
            <li>Realized our work could be valuable to others</li>
            <li>Stencil is a 'compiler' that generates Web Components</li>
            <li>Developer Experience was our number 2 priority <span class="fragment">behind performance</span></li>
          </ul>
          <aside class="notes">
            <li>We didn‚Äôt plan on building a new tool, we just wanted to improve Ionic, but after a few months of work we realized that what we were building would be valuable to other software teams as well.
            <li>We took the tool and abstracted it into a separate project from Ionic and we called it Stencil.
            <li>Stencil is a compiler that generates Web Component
            <li>Generates tiny, highly optimized web components.
            <li>Quick Demo of a stencil app  (FIBER DEMO)
          </aside>
        </section>

        <section>
          <h2>StencilJS</h2>
          <ul>
            <li>Reactive Data-binding</li>
            <li>Virtual DOM</li>
            <li>Async rendering queue</li>
            <li>TypeScript</li>
            <li>JSX</li>
          </ul>
          <aside>
            <li>tell what each feature actually is
          </aside>
        </section>

        <section>
          <h2>StencilJS</h2>
          <p>Components need to</p>
          <ul>
            <li>Have excellent developer ergonomics</li>
            <li>Be able to be lazy loaded</li>
            <li>Be able to stand on their own</li>
            <li>Be type safe</li>
            <li>Be as tiny as possible</li>
          </ul>
          <aside class="notes">
            <li>Inspiration came from a lot of places: Angular, React, Vue, etc.
            <li>Provide excellent developer experience/ergonomics.
            <li>Be standalone, the code should have no references direct dependencies on the Stencil compiler.
            <li>Be type safe.
            <li>export types so that if a dev wants to use a component with any framework + typescript it should also allow type safety.
            <li>Be as tiny as possible with as few polyfills as possible.
            <li>Components should be able to work with future versions of the stencil compiler with as few breaking changes as possible. Upgrades
          </aside>
        </section>

        <section>
          <h2>Stencil code</h2>
          Lets show how good the ergonomics are
          Code Example from the repo
        </section>

        <section>
          <h2>TypeScript powers the Stencil Compiler</h2>
          <aside class="notes">
            <li>We realized that in order to accomplish what we wanted we needed more than just language support, we also need our own compiler.
            <li>We were already using Typescript so the choice was obvious to just write some AST transforms using the provided Compiler API.
          </aside>
        </section>

        <section>
          <h2>Diving into the undocumented APIs of TypeScript</h2>
          <img src="images/dive-fail.gif"/>
        </section>


        <section>
          <h2>Metadata Collection</h2>
          Why would you do this
          How does it work
          <aside>
            <li>All the data we collected during the metadata collection lets add that back to the component in a straight forward way
          </aside>
        </section>

        <section>
          <h2>Purge</h2>
          Why would you do this
          How does it work
          How does it affect the example
          <aside class="notes">
            <li>removes all decorators that are specific to stencil
            <li>Typescript decorators have some ugly extra code that we don‚Äôt need
          </aside>
        </section>

        <section>
          <h2>Conditional Transforms</h2>
          Why would you do this
          How does it work
          How does it affect the example
          <aside class="notes">
            <li>Based on features used we may not need to bundle all of stencil‚Äôs runtime just those features that are specified by the code.
          </aside>
        </section>

        <section>
          <h2>Upgrades</h2>
          Explain how we can upgrade
          Example of text we show when upgrading
          <aside class="notes">
            <li>Read files generated by stencil and decide how they need to change and then also let the dev know that we did this for them.
            <li>ontrol the output of our compiled code and versioned to our compiler means we know exactly how the api changed and then the codemods that need to occur to ensure it works with newer runtime code.
          </aside>
        </section>

        <section>
          <h2>Documentation generation</h2>
          Almost free
          Example of output and how it relates to collection
          <aside class="notes">
            <li>Similar to the idea of TypeDoc but very specific to components and their own usage
          </aside>
        </section>

        <section>
          <h2>How does it integrate</h2>
          <ul>
            <li>Component Types</li>
            <li>Integrations example</li>
          </ul>
          <aside class="notes">
            <li>We want the ability to have lazy loaded components and get full type support.  Globals here we come.
            <li>Type Safety
            <li>document.createElement + JSX (Preact, React, Vanilla TS)
          </aside>
        </section>

        <section>
          <h2>Next Steps</h2>
          Docs and Testing
          Unit tests to ensure that we have full coverage and support for many frameworks
          <aside class="notes">
            <li>More documentation and iteration on our road to 1.0
          </aside>
        </section>

        <section>
          <h2>Thank You</h2>
        </section>

      </div>
    </div>

    <script src="lib/js/head.min.js"></script>
    <script src="js/reveal.js"></script>
    <script>

      // Full list of configuration options available at:
      // https://github.com/hakimel/reveal.js#configuration
      Reveal.initialize({
        controls: true,
        progress: true,
        history: true,
        center: true,

        transition: 'slide', // none/fade/slide/convex/concave/zoom

        // Optional reveal.js plugins
        dependencies: [
          { src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
          { src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
          { src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
          { src: 'plugin/highlight/highlight.js', async: true, condition: function() { return !!document.querySelector( 'pre code' ); }, callback: function() { hljs.initHighlightingOnLoad(); } },
          { src: 'plugin/zoom-js/zoom.js', async: true },
          { src: 'plugin/notes/notes.js', async: true }
        ]
      });

    </script>

  </body>
</html>
